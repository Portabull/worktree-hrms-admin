<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Profile Page</title>
    <link rel="stylesheet" href="css/common-style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
        }

        body {
            background-color: #f0f2f5;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 10px;
        }

        /* Navbar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            background-color: #343a40;
            color: white;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .navbar .menu-button {
            display: flex;
            align-items: center;
            cursor: pointer;
        }

        .navbar .menu-button div {
            width: 25px;
            height: 3px;
            background-color: white;
            margin: 5px 0;
            transition: all 0.3s ease;
        }

        .navbar .company-name {
            font-size: 24px;
            font-weight: 600;
            margin-left: 15px;
            color: #ffcc00;
        }

        .navbar .profile {
            position: relative;
        }

        .navbar .profile img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
        }

        .dropdown-menu {
            display: none;
            position: absolute;
            top: 60px;
            right: 0;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
            z-index: 1001;
            padding: 10px;
            width: 180px;
        }

        .dropdown-menu a {
            display: flex;
            align-items: center;
            padding: 10px;
            text-decoration: none;
            color: black;
            font-weight: 500;
            transition: background-color 0.3s ease;
            white-space: nowrap;
        }

        .dropdown-menu a i {
            margin-right: 10px;
            font-size: 18px;
        }

        .dropdown-menu a:hover {
            background-color: #f4f4f4;
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            left: -300px;
            top: 0;
            width: 250px;
            height: 100%;
            background-color: #343a40;
            padding: 20px;
            color: white;
            transition: all 0.5s ease;
            z-index: 1001;
        }

        .sidebar.active {
            left: 0;
        }

        .sidebar button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            width: 100%;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .sidebar button:hover {
            background-color: #0056b3;
        }

        /* Profile Page Content */
        .profile-container {
            margin-top: 80px;
            max-width: 900px;
            width: 100%;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            animation: fadeInUp 1s ease;
        }

        .profile-header {
            background-color: #4a90e2;
            padding: 20px;
            display: flex;
            align-items: center;
            color: white;
            transition: all 0.4s ease;
            text-align: center;
            flex-direction: column;
        }

        .profile-header img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 10px;
            border: 3px solid white;
            cursor: pointer;
            transition: transform 0.4s;
        }

        .profile-header img:hover {
            transform: scale(1.1);
        }

        .profile-header div {
            font-size: 16px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background-color: #f9f9f9;
            padding: 15px;
            justify-content: space-evenly;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 10px 30px;
            cursor: pointer;
            background-color: #f1f1f1;
            border-radius: 10px 10px 0 0;
            font-size: 16px;
            transition: background-color 0.4s, color 0.4s;
            text-align: center;
            flex-grow: 1;
        }

        .tab.active {
            background-color: #4a90e2;
            color: white;
        }

        .tab:hover {
            background-color: #4a90e2;
            color: white;
        }

        /* Scrollable Tab Content */
        .tab-content {
            display: none;
            padding: 15px;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        /* Profile Info Table for Large Screens */
        .tab-content table {
            width: 100%;
            margin-top: 10px;
            border-collapse: collapse;
            word-wrap: break-word;
        }

        /* Table Rows */
        th, td {
            text-align: left;
            padding: 10px;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
        }

        th {
            background-color: #f5f5f5;
            width: 30%;
            white-space: nowrap;
        }

        td {
            width: 70%;
        }

        /* For Larger Screens (Two Columns) */
        @media (min-width: 769px) {
            .tab-content table tr {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }

            th, td {
                width: 45%;
            }
        }

        /* For Smaller Screens (Single Column) */
        @media (max-width: 768px) {
            th, td {
                display: block;
                font-size: 14px;
                white-space: normal;
            }

            .tab-content table {
                width: 100%;
            }

            .tab-content table tr {
                display: block;
                margin-bottom: 10px;
            }

            td {
                width: 100%;
            }

            th {
                white-space: nowrap;
                margin-bottom: 5px;
            }
        }

        /* Input Fields */
        td input {
            width: 90%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        td input:focus {
            border-color: #4a90e2;
            box-shadow: 0 0 5px rgba(74, 144, 226, 0.5);
            outline: none;
            transform: scale(1.02);
        }

        /* Buttons */
        .edit-btn {
            padding: 10px 20px;
            background-color: #4a90e2;
            color: white;
            border: none;
            border-radius: 5px;
            margin-top: 20px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.3s;
            width: 100%;
        }

        .edit-btn:hover {
            background-color: #357ABD;
            transform: translateY(-3px);
        }

      /* Enhanced Button Styling */
.security-box button {
    background-color: #4a90e2;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 30px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    margin-left: 10px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(74, 144, 226, 0.3);
}

.security-box button:hover {
    background-color: #357abd;
    box-shadow: 0 6px 15px rgba(53, 122, 189, 0.5);
    transform: translateY(-3px);
}

.security-box button:active {
    transform: translateY(1px);
    box-shadow: 0 2px 5px rgba(53, 122, 189, 0.3);
}

/* Layout Enhancements */
.security-box {
    background-color: #ffffff;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    padding: 20px;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}

.security-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}

/* Text Styling */
.security-box p {
    margin: 5px 0;
    color: #444;
    font-size: 16px;
    font-weight: 600;
}

.security-box strong {
    color: #333;
    font-weight: 700;
}

/* Improved Button Layout */
.security-box-actions {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 10px;
}

/* Red Logout Button */
.logout-btn {
    background-color: #e74c3c !important; /* Red color with !important */
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 30px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    transition: all 0.3s ease;
    box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3);
}

.logout-btn:hover {
    background-color: #c0392b !important; /* Red hover color with !important */
    box-shadow: 0 6px 15px rgba(192, 57, 43, 0.5);
    transform: translateY(-3px);
}

.logout-btn:active {
    transform: translateY(1px);
    box-shadow: 0 2px 5px rgba(192, 57, 43, 0.3);
}



/* Highlighted Box for Current User */
.security-box.current-user {
    background-color: #fdf1f0;
    border: 2px solid #e74c3c;
    box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
    animation: glow 1.5s infinite ease-in-out;
}

/* Pulsing Glow Animation */
@keyframes glow {
    0% {
        box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
    }
    50% {
        box-shadow: 0 0 25px rgba(231, 76, 60, 0.7);
    }
    100% {
        box-shadow: 0 0 15px rgba(231, 76, 60, 0.5);
    }
}










        /* Popup Modal for Image Upload */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 300px;
            text-align: center;
            animation: fadeIn 0.5s ease;
        }

        .modal-content input {
            margin-top: 10px;
            margin-bottom: 20px;
        }

        .close-btn {
            background-color: red;
            color: white;
            padding: 5px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-right: 10px;
        }

        .upload-btn {
            background-color: green;
            color: white;
            padding: 5px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        /* For Smaller Screens (Read-Only Mode) */
        @media (max-width: 768px) {
            th, td {
                display: block;
                font-size: 14px;
                white-space: normal;
            }

            .tab-content table {
                width: 100%;
            }

            .tab-content table tr {
                display: block;
                margin-bottom: 10px;
            }

            td {
                width: 100%;
            }

            th {
                white-space: nowrap;
                margin-bottom: 5px;
            }

            /* Align label and value on the same line for read-only mode */
            .label-value {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 0;
                border-bottom: 1px solid #ddd;
            }

            .label-value .label {
                font-weight: bold;
                color: #555;
                flex-basis: 40%;
            }

            .label-value .value {
                flex-basis: 60%;
                text-align: right;
            }
        }










 /* Rotate animation for the loader */
    .loading {
      animation: rotate 1s linear infinite;
    }

    /* Keyframes for the rotating animation */
    @keyframes rotate {
      100% {
        transform: rotate(360deg);
      }
    }



.loader-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(255, 255, 255, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    visibility: hidden; /* Hide loader by default */
}

.loader {
    border: 8px solid #f3f3f3; /* Light gray */
    border-top: 8px solid #3498db; /* Blue */
    border-radius: 50%;
    width: 50px;
    height: 50px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}


    </style>
</head>
<body>
<!-- Error Popup Modal -->
<div id="uniqueErrorModal9875">
    <div class="unique-modal-content9875" id="modalContent9875">
        <h2 id="errorHeader9875">Error Occurred</h2>
        <p id="errorFooter9875" class="message-container9875">An unexpected error has occurred. Please try again later.</p>
        <span class="read-more9875" id="readMore9875">Read more</span>
        <button id="uniqueOkayBtn9875">Okay</button>
    </div>
</div>

<div id="loader" class="loader-overlay">
    <div class="loader"></div>
</div>


<!-- Navbar -->
<div class="navbar">
    <div class="menu-button" onclick="toggleSidebar()">
        <div></div>
        <span class="company-name">Worktree</span>
    </div>

    <div class="profile" id="profile-dropdown">
        <img src="image/user-profile.jpeg" alt="Profile" onclick="toggleProfileDropdown()">
        <div class="dropdown-menu" id="dropdown-menu">
            <a href="#" onclick="openProfileSettings()"><i class="fas fa-cog"></i>Settings</a>
            <a href="#" onclick="manageUserProfiles(startLoader)"><i class="fas fa-user"></i>Manage Profiles</a>
            <a href="#" onclick="logout(startLoader,redirectafterlogout)"><i class="fas fa-sign-out-alt"></i>Logout</a>
        </div>
    </div>
</div>

<!-- Sidebar -->
<div class="sidebar" id="sidebar">
    <button class="close-btn" onclick="toggleSidebar()">× Close</button>
    <button onclick="gotohome()">Home</button>
    <button onclick="manageTenants(startLoader)">Manage Tenants</button>
    <button onclick="showReports()">Reports</button>
</div>

<!-- Profile Page Content -->
<div class="profile-container">
    <div class="profile-header">
        <img id="profile-img" src="image/user-profile.jpeg" alt="Profile Image" onclick="openModal()">
        <div>
            <p><strong>Name:</strong> <span id="profile-name"></span></p>
            <p><strong>Mobile:</strong> <span id="profile-mobile"></span></p>
            <p><strong>Email:</strong> <span id="profile-email"></span></p>
            <p><strong>Location:</strong> <span id="profile-location"></span></p>
            <p><strong>Alternative Mobile:</strong> <span id="profile-alt-mobile"></span></p>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="openTab(event, 'profile')">Profile</div>
        <div class="tab" onclick="openTab(event, 'security')">Security</div>
        <div class="tab" id="accounts-tab" style="display: none;" onclick="openTab(event, 'accounts')">Accounts</div>
    </div>

    <!-- Tab Content -->
    <div id="profile" class="tab-content active">
        <table>
            <tr>
                <th>Name:</th>
                <td><span id="name-field"></span><input id="name-input" type="text" value="" style="display: none;"></td>
                <th>Email:</th>
                <td><span id="email-field"></span><input id="email-input" type="email" value="" style="display: none;"></td>
            </tr>
            <tr>
                <th>Mobile:</th>
                <td><span id="mobile-field"></span><input id="mobile-input" type="text" value="" style="display: none;"></td>
                <th>Location:</th>
                <td><span id="location-field"></span><input id="location-input" type="text" value="" style="display: none;"></td>
            </tr>
            <tr>
                <th>Address:</th>
                <td><span id="address-field"></span><input id="address-input" type="text" value="" style="display: none;"></td>
                <th>Alternative Mobile:</th>
                <td><span id="alt-mobile-field"></span><input id="alt-mobile-input" type="text" value="" style="display: none;"></td>
            </tr>
        </table>
        <button class="edit-btn" id="edit-btn" onclick="toggleEdit()">Edit</button>
    </div>

    <!-- Security Tab Content -->
    <div id="security" class="tab-content">
        <div class="security-box">
            <div>
                <p id="loggedInDevice"></p>
                <p id="loggedInTime"></p>
            </div>
            <div>
                <button>Logout</button>
                <button>View Login Location</button>
            </div>
        </div>
    </div>

    <!-- Accounts Tab Content -->
    <div id="accounts" class="tab-content">
        <button class="edit-btn"onclick="redirectToAddViewUsers()">Add/View Accounts</button>
    </div>
</div>

<!-- Modal for Uploading Profile Picture -->
<div class="modal" id="profile-modal">
    <div class="modal-content">
        <h3>Upload Profile Picture</h3>
        <input type="file" id="file-input">
        <br>
        <button class="upload-btn" onclick="uploadImage()">Upload</button>
        <button class="close-btn" onclick="closeModal()">Close</button>
    </div>
</div>
<script src="js/security.js"></script>
<script src="js/worktree.js"></script>
<script>
  // Sample JSON data with multiple security entries
var profileData;

function loadProfileInformation(){
// Injecting profile data dynamically
document.getElementById('profile-name').textContent = profileData.profile.name;
document.getElementById('profile-mobile').textContent = profileData.profile.mobile;
document.getElementById('profile-email').textContent = profileData.profile.email;
document.getElementById('profile-location').textContent = profileData.profile.location;
document.getElementById('profile-alt-mobile').textContent = profileData.profile.alternativeMobileNumber;

document.getElementById('name-field').textContent = profileData.profile.name;
document.getElementById('email-field').textContent = profileData.profile.email;
document.getElementById('mobile-field').textContent = profileData.profile.mobile;
document.getElementById('location-field').textContent = profileData.profile.location;
document.getElementById('address-field').textContent = profileData.profile.Address;
document.getElementById('alt-mobile-field').textContent = profileData.profile.alternativeMobileNumber;
}




function loadSecurityData() {
    const securityContent = document.getElementById('security');
    securityContent.innerHTML = ''; // Clear previous content if any
    profileData.security.forEach((security, index) => {
        const securityBox = document.createElement('div');
        securityBox.classList.add('security-box');

        // Highlight if currentUser is true
        if (security.currentUser) {
            securityBox.classList.add('current-user');
        }

        securityBox.innerHTML = `
            <div>
                <p><strong>Device:</strong> ${security.loggedInDevice}</p>
                <p><strong>Logged in at:</strong> ${security.loggedInTime}</p>
            </div>
            <div class="security-box-actions">
                <button class="logout-btn" onclick="logoutselectedlogin('${security.tokenId}')">Logout</button>
                <button onclick="viewLoginLocation('${security.loginLocation}')">View Login Location</button>
            </div>
        `;
        securityContent.appendChild(securityBox);
    });
}


// Sidebar Toggle
function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
}

// Profile Dropdown
function toggleProfileDropdown() {
    const dropdown = document.getElementById('dropdown-menu');
    dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
}

// Close dropdown when clicking outside
window.onclick = function(event) {
    if (!event.target.matches('.profile img')) {
        const dropdown = document.getElementById('dropdown-menu');
        if (dropdown.style.display === 'block') {
            dropdown.style.display = 'none';
        }
    }
}

// Tabs
function openTab(event, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tab-content");
    for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].classList.remove("active");
    }
    tablinks = document.getElementsByClassName("tab");
    for (i = 0; i < tablinks.length; i++) {
        tablinks[i].classList.remove("active");
    }
    document.getElementById(tabName).classList.add("active");
    event.currentTarget.classList.add("active");
}
// Toggle Edit Mode
function toggleEdit() {
    const isEditing = document.getElementById('edit-btn').textContent === 'Save';

    if (isEditing) {
        // Save Mode: Save the input field values back to the spans
        document.getElementById('name-field').textContent = document.getElementById('name-input').value;
        document.getElementById('email-field').textContent = document.getElementById('email-input').value;
        document.getElementById('mobile-field').textContent = document.getElementById('mobile-input').value;
        document.getElementById('location-field').textContent = document.getElementById('location-input').value;
        document.getElementById('address-field').textContent = document.getElementById('address-input').value;
        document.getElementById('alt-mobile-field').textContent = document.getElementById('alt-mobile-input').value;

        startLoader();
        dynamicXhrApi('POST', BASE_URL + 'api/profile', { 'Content-Type': 'application/json','Authorization':getCurrentToken() }, { "userName": document.getElementById('name-input').value, "email": document.getElementById('email-input').value,"mobile":  document.getElementById('mobile-input').value,"location":document.getElementById('location-input').value,"address":document.getElementById('address-input').value,"altMobile":document.getElementById('alt-mobile-input').value}, afterSaveProfile);
    } else {
        // Edit Mode: Populate the input fields with the existing values from the spans
        document.getElementById('name-input').value = document.getElementById('name-field').textContent;
        document.getElementById('email-input').value = document.getElementById('email-field').textContent;
        document.getElementById('mobile-input').value = document.getElementById('mobile-field').textContent;
        document.getElementById('location-input').value = document.getElementById('location-field').textContent;
        document.getElementById('address-input').value = document.getElementById('address-field').textContent;
        document.getElementById('alt-mobile-input').value = document.getElementById('alt-mobile-field').textContent;

        // Change the button text to 'Save'
        document.getElementById('edit-btn').textContent = 'Save';
    }

    // Toggle Input Fields visibility
    ['name', 'email', 'mobile', 'location', 'address', 'alt-mobile'].forEach(function(field) {
        document.getElementById(field + '-field').style.display = isEditing ? 'inline' : 'none';
        document.getElementById(field + '-input').style.display = isEditing ? 'none' : 'inline';
    });
}

function afterSaveProfile() {
    stopLoader();
        // Change the button text to 'Edit'
        document.getElementById('edit-btn').textContent = 'Edit';
}


// Modal for Profile Image Upload
function openModal() {
    document.getElementById('profile-modal').style.display = 'flex';
}

function closeModal() {
    document.getElementById('profile-modal').style.display = 'none';
}

// Upload Profile Image
function uploadImage() {
    const fileInput = document.getElementById('file-input');
    if (fileInput.files.length > 0) {
        // Create FormData and append the file
        const formData = new FormData();
        formData.append("file", fileInput.files[0]);

        // Call dynamicXhrApi to upload the file
        dynamicXhrApi(
            "POST", // HTTP method
            BASE_URL + 'api/upload/profile', // Replace with your upload endpoint
            { 'Authorization':getCurrentToken() }, // Headers, if needed
            formData, // FormData with the file
            function(response,decryptedResponseObj) {
                if (response.status >= 200 && response.status < 300) {
                    // On successful upload, display the image
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('profile-img').src = e.target.result;
                    };
                    reader.readAsDataURL(fileInput.files[0]);

                    console.log("File uploaded successfully:", decryptedResponseObj);
                } else {
                    console.error("File upload failed:", decryptedResponseObj);
                    alert("Failed to upload the image. Please try again.");
                }
            },
            true // Indicate that this is a file upload
        );

        closeModal();
    } else {
        alert("Please select a file to upload.");
    }
}


// Manage viewAccounts flag to show/hide Accounts tab
function manageAccountsTab() {
    if (profileData.viewAccounts) {
        document.getElementById("accounts-tab").style.display = "block";
    } else {
        document.getElementById("accounts-tab").style.display = "none";
    }
}


function viewLoginLocation(url) {
    window.open(url, '_blank'); // Open the URL in a new tab
}

function afterLogout(xhr){
 window.location.href = "settings";
}

function logoutselectedlogin(tokenId) {

    startLoader();
    dynamicXhrApi('POST',BASE_URL + 'api/profile/logout?tokenId=' + tokenId,{ 'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization':getCurrentToken() },undefined, afterLogout);


    // Example: Make an API call to log out
    // fetch('/logout', {
    //     method: 'POST',
    //     body: JSON.stringify({ tokenId }),
    //     headers: {
    //         'Content-Type': 'application/json'
    //     }
    // }).then(response => {
    //     if (response.ok) {
    //         alert('Logged out successfully');
    //         // Optionally, refresh the page or update the UI
    //     } else {
    //         alert('Failed to log out');
    //     }
    // });
}




function init(xhr,decryptedResponseObj){

   if (xhr.status == 200) {
        var response = decryptedResponseObj;
        profileData = response;
}else{
  removeCurrentUserCache();
}
stopLoader();
loadProfileInformation();

// Call the function on load to apply logic
manageAccountsTab();

// Call this function when the security tab is loaded or initialized
loadSecurityData();
}


const profilePicBase64 = getCurrentProfileImageWithoutRedirect();
      const profileBtn = document.querySelector('.profile img');
            profileBtn.src = profilePicBase64;
             document.getElementById('profile-img').src =profilePicBase64;
            startLoader();
dynamicXhrApi('GET',BASE_URL + 'api/settings',{ 'Content-Type': 'application/json', 'Accept': 'application/json', 'Authorization':getCurrentToken() },undefined, init);


function startLoader() {
    document.getElementById('loader').style.visibility = 'visible';
    document.body.style.pointerEvents = 'none'; // Disable interaction with the screen
}

function stopLoader() {
    document.getElementById('loader').style.visibility = 'hidden';
    document.body.style.pointerEvents = 'auto'; // Re-enable interaction with the screen
}



 window.addEventListener('pageshow', function(event) {
        // Check if the page is loaded from the cache
        if (event.persisted) {
            stopLoader();
        }
    });

    function redirectToAddViewUsers(){
            window.location.href = "manage-users";
    }

</script>



</body>
</html>
